---
# - hosts: all
#   vars:
#     ansible_user: root
#   roles:
#     - create_user
#     - create_sshkey
#     - auth_key4target

# - hosts: localhost
#   roles:
#     - auth_key4controller

# パッケージのインストール
- hosts: all
  become: true
  roles:
    - dnf

- hosts: all
  vars:
    install_pkg: "{{ (common_pkg | default([])) + (group_pkg | default([])) + (role_pkg | default([])) + (host_pkg | default([])) }}"
  become: true
  roles:
    - install_packages

# dnfインストール以外のパッケージインストール
# インストールに必要なepelとpipのインストール
- hosts: www
  become: true
  roles:
    - epel
    - pip3

# dnfではインストールできないパッケージのインストール
- hosts: www
  become: true
  roles:
    - install_other_packages